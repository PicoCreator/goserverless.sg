<!DOCTYPE html>
<html lang=en>
<head>
<meta charset="utf-8">
<script src="https://unpkg.com/vue"></script>
<style>
main {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
grid-template-rows: fit-content(40%);

}
</style>
</head>
<body>
<main>
<p>Country:  {{ .EmojiCountry }}</p>
<div id="app">
<form id="myForm" v-on:submit.prevent="submitForm">
<input v-model="message">
<p>Message is: ${ message }</p>
{{ .csrfField }}
<button type="submit">Send</button>
</form>
</div>
</main>

<script>
var app = new Vue({
	delimiters: ['${', '}'],
	el: '#app',
	data: {
		message: 'Hello Vue!'
	},
	methods: {
	submitForm: function (x) {
		console.log('submitting message...', x)
		console.log('target...', x.target)
		fetch('/', { method: 'POST',
			headers: { "X-CSRF-Token": document.getElementById("myForm").elements["gorilla.csrf.Token"].value },
			credentials: 'same-origin',
			body: {
			message: this.message
		}}).then(function () {
			alert('Your form was submitted!');
		}, function () {
			alert('Form submission failed');
		});
	}
	}
})
</script>

</body>
</html>
